
üöÄ Starting Comprehensive Pricing & Availability Tests

üìù Test results will be saved to: /Users/bogdanionutcoman/dev-projects/RentalSpot-Builder/logs/pricing-test-2025-05-13T09-58-24.750Z.log


üìå Testing property: prahova-mountain-chalet

================================================================================

üîç Test 1: Booking request with at least one day blocked in the middle of the stay
Testing date range: 2025-05-12 to 2025-05-15
SUCCESS: Test passed: Request was correctly rejected due to blocked date in the middle
Unavailable dates detected: 2025-05-13, 2025-05-14

üîç Test 2: Booking request with checkout date blocked
Testing date range: 2025-05-11 to 2025-05-13
SUCCESS: System allows checkout day to be blocked (common in many booking systems)

üîç Test 3: Booking request of 4 days with one of the dates having min stay > 4
Found date with minimum stay: 2025-05-28 requires 3 nights
‚ö†Ô∏è Could not find a date with minimum stay > 4, using alternative test
Testing with potentially regular dates: 2025-05-23 to 2025-05-27 (4 nights)
Result: {"available":true,"pricing":{"dailyRates":{"2025-05-23":216,"2025-05-24":216,"2025-05-25":180,"2025-05-26":180},"totalPrice":832,"averageNightlyRate":198,"subtotal":832,"cleaningFee":40,"lengthOfStayDiscount":null,"currency":"EUR","accommodationTotal":792}}

üîç Test 4: Booking request of 4 days with one of the dates having min stay = 4
Found date with minimum stay: 2025-05-28 requires 3 nights
‚ö†Ô∏è Could not find a date with minimum stay = 4, using alternative test
Testing with regular dates: 2025-05-23 to 2025-05-27 (4 nights)
SUCCESS: Test passed: Regular 4-night stay was allowed (no special min stay)

üîç Test 5: Correct booking with different guest counts
Testing guest counts with date range: 2025-05-23 to 2025-05-28

  Testing with 1 guests:
SUCCESS: Booking with 1 guests is available
  Total price: 1012 EUR
  Average nightly rate: 194.4
  Daily rate range: 180 to 216 EUR
  Daily rates vary (dynamic pricing detected)

  Testing with 2 guests:
SUCCESS: Booking with 2 guests is available
  Total price: 1012 EUR
  Average nightly rate: 194.4
  Daily rate range: 180 to 216 EUR
  Daily rates vary (dynamic pricing detected)

  Testing with 4 guests:
SUCCESS: Booking with 4 guests is available
  Total price: 1012 EUR
  Average nightly rate: 194.4
  Daily rate range: 180 to 216 EUR
  Daily rates vary (dynamic pricing detected)

  Testing with 6 guests:
SUCCESS: Booking with 6 guests is available
  Total price: 1262 EUR
  Average nightly rate: 244.4
  Daily rate range: 230 to 266 EUR
  Daily rates vary (dynamic pricing detected)

  Testing with 8 guests:
SUCCESS: Booking with 8 guests is available
  Total price: 1387 EUR
  Average nightly rate: 269.4
  Daily rate range: 255 to 291 EUR
  Daily rates vary (dynamic pricing detected)

üìå Testing property: coltei-apartment-bucharest

================================================================================

üîç Test 1: Booking request with at least one day blocked in the middle of the stay
ERROR: No unavailable dates found for coltei-apartment-bucharest
Creating test case with potentially available dates as fallback
Testing date range: 2025-06-12 to 2025-06-15
ERROR: Test failed: Expected rejection due to unavailable dates, got: {"available":true,"pricing":{"dailyRates":{"2025-06-12":95,"2025-06-13":95,"2025-06-14":95},"totalPrice":310,"averageNightlyRate":95,"subtotal":310,"cleaningFee":25,"lengthOfStayDiscount":null,"currency":"RON","accommodationTotal":285}}

üîç Test 2: Booking request with checkout date blocked
ERROR: No unavailable dates found for coltei-apartment-bucharest
Creating test case with potentially available dates as fallback
Testing date range: 2025-06-12 to 2025-06-14
SUCCESS: System allows checkout day to be blocked (common in many booking systems)

üîç Test 3: Booking request of 4 days with one of the dates having min stay > 4
‚ö†Ô∏è Could not find a date with minimum stay > 4, using alternative test
Testing with potentially regular dates: 2025-05-14 to 2025-05-18 (4 nights)
Result: {"available":true,"pricing":{"dailyRates":{"2025-05-14":95,"2025-05-15":95,"2025-05-16":95,"2025-05-17":95},"totalPrice":405,"averageNightlyRate":95,"subtotal":405,"cleaningFee":25,"lengthOfStayDiscount":null,"currency":"RON","accommodationTotal":380}}

üîç Test 4: Booking request of 4 days with one of the dates having min stay = 4
‚ö†Ô∏è Could not find a date with minimum stay = 4, using alternative test
Testing with regular dates: 2025-05-14 to 2025-05-18 (4 nights)
SUCCESS: Test passed: Regular 4-night stay was allowed (no special min stay)

üîç Test 5: Correct booking with different guest counts
Testing guest counts with date range: 2025-05-14 to 2025-05-19

  Testing with 1 guests:
SUCCESS: Booking with 1 guests is available
  Total price: 500 RON
  Average nightly rate: 95
  Daily rate range: 95 to 95 RON

  Testing with 2 guests:
SUCCESS: Booking with 2 guests is available
  Total price: 500 RON
  Average nightly rate: 95
  Daily rate range: 95 to 95 RON

  Testing with 4 guests:
SUCCESS: Booking with 4 guests is available
  Total price: 500 RON
  Average nightly rate: 95
  Daily rate range: 95 to 95 RON

  Testing with 6 guests:
SUCCESS: Booking with 6 guests is available
  Total price: 500 RON
  Average nightly rate: 95
  Daily rate range: 95 to 95 RON

  Testing with 8 guests:
SUCCESS: Booking with 8 guests is available
  Total price: 500 RON
  Average nightly rate: 95
  Daily rate range: 95 to 95 RON

================================================================================

üìä Test Summary:
Total tests: 18
Passed: 17
Failed: 1
Success rate: 94%
